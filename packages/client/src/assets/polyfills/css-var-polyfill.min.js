var p = {
  t: function() {
    (window.CSS && window.CSS.supports && window.CSS.supports('(--foo: red)')) ||
      ((p.v = {}), (p.b = {}), (p.o = {}), p.f(), p.u());
  },
  f: function() {
    var a = document.querySelectorAll('style:not([id*="inserted"]),link[type="text/css"],link[rel="stylesheet"]'),
      b = 1;
    [].forEach.call(a, function(a) {
      var c;
      'STYLE' === a.nodeName
        ? ((c = a.innerHTML),
          p.i(a.innerHTML, function(c) {
            (a.innerHTML = c), p.s(c, b);
          }))
        : 'LINK' === a.nodeName &&
          (p.g(a.getAttribute('href'), b, function(a, b) {
            p.i(b.responseText, function(b) {
              p.s(b, a), (p.o[a] = b), p.u();
            });
          }),
          (c = '')),
        (p.o[b] = c),
        b++;
    });
  },
  s: function(a, b) {
    p.b[b] = a.match(/([^var\/\*])--[a-zA-Z0-9\-]+:(\s?)(.+?);/gim);
  },
  u: function() {
    p.r(p.b);
    for (var a in p.o) {
      var b = p.c(p.o[a], p.v);
      if (document.querySelector('#inserted' + a)) document.querySelector('#inserted' + a).innerHTML = b;
      else {
        var c = document.createElement('style');
        (c.innerHTML = b), (c.id = 'inserted' + a), document.getElementsByTagName('head')[0].appendChild(c);
      }
    }
  },
  c: function(a, b) {
    for (var c in b) {
      var d = new RegExp('var\\(\\s*?' + c.trim() + '(\\)|,([\\s\\,\\w]*\\)))', 'g');
      a = a.replace(d, b[c]);
    }
    for (var e = /var\(\s*?([^)^,\.]*)(?:[\s\,])*([^)\.]*)\)/g; (match = e.exec(a)); )
      a = a.replace(match[0], match[2]);
    return a;
  },
  r: function(a) {
    for (var b in a) {
      var c = a[b];
      c.forEach(function(a) {
        var b = a.split(/:\s*/);
        p.v[b[0]] = b[1].replace(/;/, '');
      });
    }
  },
  g: function(a, b, c) {
    var d = new XMLHttpRequest();
    d.open('GET', a, !0),
      d.overrideMimeType('text/css;'),
      (d.onload = function() {
        d.status >= 200 && d.status < 400
          ? 'function' == typeof c && c(b, d, a)
          : console.warn('an error was returned from:', a);
      }),
      (d.onerror = function() {
        console.warn('we could not getAll anything from:', a);
      }),
      d.send();
  },
  i: function(a, b) {
    var d,
      c = /^(?![\/\*])@import\s.*(?:url\(["'])([a-zA-Z0-9\.:\/_-]*)["']\)?([^;]*);/gim,
      e = 0,
      f = 0,
      g = {};
    for (a.search(c) === -1 && b(a); (d = c.exec(a)); )
      (g[d[1]] = d),
        e++,
        p.g(d[1], null, function(c, d, h) {
          (a = a.replace(
            g[h][0],
            (g[h][2].trim() ? '@media ' + g[h][2].trim() + ' {' : '') + d.responseText + (g[h][2].trim() ? '}' : '')
          )),
            f++,
            f === e && b(a);
        });
  },
};
p.t();
